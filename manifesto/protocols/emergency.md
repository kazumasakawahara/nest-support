# 緊急時対応プロトコル (Emergency Protocol)

**マニフェスト価値:** 安全 (Safety)
**優先度:** 最高 - 他の全てのプロトコルに優先する

---

## トリガー条件

以下のキーワードを検出した場合、このプロトコルを即座に発動する。

**緊急ワード:** SOS、緊急、助けて、倒れた、発作、パニック、救急、自傷、事故、急病、けが

---

## 実行手順

### ステップ1：緊急情報の即時取得（0秒〜30秒）

対象クライアントを特定し、適切なSkillのCypherテンプレートを使用して緊急情報を取得する。

**障害福祉クライアントの場合（port 7687）:**
→ `neo4j-support-db` スキルのテンプレート2（クライアントプロフィール）を使用し、`neo4j` MCP の `read_neo4j_cypher` で実行。

**生活保護受給者の場合（port 7688）:**
→ `livelihood-support` スキルのテンプレート9（訪問前ブリーフィング）を使用し、`neo4j-livelihood` MCP の `read_neo4j_cypher` で実行。

### ステップ2：情報の優先順位表示

取得した情報を以下の順序で提示する。順序を変えてはならない。

1. **⚠️ 禁忌事項（NgAction / NgApproach）**
   - 「絶対にしてはいけないこと」を最初に伝える
   - 二次被害を防ぐため、これが最優先
   - 表示形式: 赤字強調、⚠️アイコン付き

2. **🛡️ 経済的リスク（EconomicRisk）** ※livelihood-supportスキルのみ
   - 搾取の兆候がある場合に警告
   - 該当なしの場合はスキップ

3. **✅ 具体的対処（CarePreference / EffectiveApproach）**
   - 「今すぐできること」を提示
   - 過去に効果があった対応を優先的に表示

4. **📞 緊急連絡先（KeyPerson）**
   - rank順に表示（rank 1が最優先）
   - 電話番号、続柄、役割を明記

5. **🏥 医療機関（Hospital）**
   - かかりつけ医の名前、電話番号、住所

6. **⚖️ 法的代理人（Guardian）**
   - 後見人等の情報（必要な場合）

### ステップ3：追加判断

緊急情報を提示した後、状況に応じて以下を判断する。

- **パニック発作の場合:** 過去の支援記録から効果的だった対応パターンを検索
  → `neo4j-support-db` スキルのテンプレート6（ケアパターン発見）を `neo4j` MCP の `read_neo4j_cypher` で実行

- **親の急病・入院の場合:** → `protocols/parent_down.md` に移行

- **経済的搾取の疑いがある場合:** → 経済リスクの詳細を確認
  → `livelihood-support` スキルのテンプレート2a〜2d（クライアントプロフィール）を `neo4j-livelihood` MCP の `read_neo4j_cypher` で実行

---

## 出力ルール

- 必ず日本語で回答する
- 禁忌事項は「⚠️ 避けてください」と強調する
- 緊急連絡先は見やすくリスト形式で表示する
- 内部の思考過程は出力しない
- ツール使用の許可を求めず、黙って実行して結果を伝える
- 情報が不足している場合は「登録されていません」と明記し、代替手段を提案する

---

## 実例：reasoning.logから学んだパターン

### パターン1：外出先でのパニック
```
入力: 「佐々木まりさんに同行してデパートに出かける予定ですが、万一のために緊急連絡を教えて下さい。」
→ search_emergency_info(client_name="佐々木まり") を実行
→ 禁忌事項 → 推奨ケア → 緊急連絡先の順で提示
```

### パターン2：親の緊急入院
```
入力: 「母（山田花子）が急病で入院してしまいました。今、家には本人（山田健太）だけが残されています。」
→ search_emergency_info(client_name="山田健太") を実行
→ 禁忌事項・推奨ケアを提示後、parent_down.md プロトコルに移行
```

### パターン3：食事拒否とパニック
```
入力: 「山田健太さんが食事を拒否してパニックになっています。」
→ search_emergency_info(client_name="山田健太", situation="パニック") を実行
→ 過去の支援記録から食事関連の効果的対応を検索
```
